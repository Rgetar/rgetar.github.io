<!DOCTYPE html>
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Ordinal Explorer Online</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body style="font-family:Arial;white-space:pre;line-height:1;"
>
Input code:

<textarea id="inputcode" name="inputcode" rows="30" cols="125" margin-top="100px">
function compare(s1,s2)
{
return s1.localeCompare(s2);
}

function issuccessor(st)
{
return true;
}

function fs(st,n)
{
return '';
}

function convert(st)
{
return st;
}

let bo='Some large ordinal';
let initlargeordinal=bo;
let zerostring='';
let minusonestring='-';
</textarea>

<button id="runbutton">Run</button>

<script
>'use strict'






runbutton.onclick=function(e)
{
//if(repeatedrun&&!w.closed)
if(false)
   {
   //scriptelement.innerHTML=scriptcode1+inputcode.value+scriptcode2;
   //scriptelement.innerHTML='qwesrdghks';
   //w.close();
   //w.document.body.lastChild.remove();
   //
   
   //w.document.body.lastChild.innerHTML=scriptcode1+inputcode.value+scriptcode2;
   
   //w.location.reload();
   
   //w=window.open('Ordinal Explorer (exploitable sample).htm','OEtab');
   
   //w=window.open('','OEtab');
   
   w.document.head.innerHTML=headcode;

   let s=w.document.createElement('script');
   s.src='https://code.jquery.com/jquery-3.6.0.min.js';
   w.document.head.appendChild(s);

   s=w.document.createElement('style');
   s.setAttribute('type',"text/css");
   s.setAttribute('media',"Screen");
   s.innerHTML=headstylecode;
   w.document.head.insertAdjacentHTML('afterend',s.outerHTML);

   w.document.body.setAttribute('style',"font-family:Arial;white-space:pre;line-height:0;");
   w.document.body.innerHTML=bodycode;

	scriptelement=w.document.createElement('script');

   w.document.body.appendChild(scriptelement);
   
   w.document.body.lastChild.innerHTML=scriptcode1+newscript+scriptcode2;  
   
   }
else
	{
	
	if(repeatedrun&&!w.closed)
	   w.close();
	
	//w=window.open('Ordinal Explorer (exploitable).htm','OEtab');
	w=window.open('','OEtab');
	
   w.document.head.innerHTML=headcode;

   let s=w.document.createElement('script');
   s.src='https://code.jquery.com/jquery-3.6.0.min.js';
   w.document.head.appendChild(s);

   s=w.document.createElement('style');
   s.setAttribute('type',"text/css");
   s.setAttribute('media',"Screen");
   s.innerHTML=headstylecode;
   w.document.head.insertAdjacentHTML('afterend',s.outerHTML);

   w.document.body.setAttribute('style',"font-family:Arial;white-space:pre;line-height:0;");
   w.document.body.innerHTML=bodycode;

	scriptelement=w.document.createElement('script');
	
	//scriptelement.innerHTML='qwesrdghks';
	//scriptelement.innerHTML=scriptcode1+inputcode.value+scriptcode2;
	
	//scriptelement.innerHTML=inputcode.value;
   w.document.body.appendChild(scriptelement);
   
   w.document.body.lastChild.innerHTML=scriptcode1+inputcode.value+scriptcode2;
   //w.document.body.lastChild.innerHTML=scriptcode1+newscript+scriptcode2;
   //w.document.body.lastChild.innerHTML='aedshfgk;jkyt';
   
   
	//scriptelement=w.document.createElement('script');
   //w.document.body.appendChild(scriptelement);
   //w.document.body.lastChild.innerHTML=w.document.body.lastChild.previousSibling.innerHTML;
   
   
   //w.document.body.lastChild.outerHTML=w.document.body.lastChild.outerHTML.replace(/scripta/g,"script");
   //w.document.body.lastChild.tagName='SCRIPT';
   
   repeatedrun=true;
	}
}







let headcode=`
<meta charset="utf-8" />
<title>Ordinal Explorer Online</title>
`;

let headstylecode=`
a{text-decoration:none;color:blue;}
a:hover{text-decoration:underline;}
a:visited{color:blue;}
li{list-style-type:none;cursor:pointer;padding-left: 7px;padding-right: 27px; min-height:32px;}
td{cursor:pointer;}
sub{font-size:0.83rem;}
sup{font-size:0.83rem;}

.subu
{
margin-right:5px;
margin-bottom:5px;
min-width:16px;
min-height:16px;
text-align:center;
float:left;
outline:1px solid #909090;
border-radius:4px;
line-height:15px;
font-size:11px;
cursor:pointer;
}

.subuleft
{
margin-right:1px;
margin-bottom:5px;
min-width:16px;
min-height:16px;
text-align:center;
float:left;
outline:1px solid #909090;
border-radius:4px 0 0 4px;
line-height:15px;
font-size:11px;
cursor:pointer;
}

.subumiddle
{
margin-right:1px;
margin-bottom:5px;
min-width:16px;
min-height:16px;
text-align:center;
float:left;
outline:1px solid #909090;
line-height:15px;
font-size:11px;
cursor:pointer;
}

.suburight
{
margin-right:5px;
margin-bottom:5px;
min-width:16px;
min-height:16px;
text-align:center;
float:left;
outline:1px solid #909090;
border-radius:0 4px 4px 0;
line-height:15px;
font-size:11px;
cursor:pointer;
}

.subuc
{
float:left;
}

`;

let bodycode=`
<span onmousedown="return false" id="sidebar" style="line-height:2;position:absolute;right:0px;width:200px;padding-left:42px;padding-right:15px;top:0;bottom:0;overflow:auto;float:right;background:#f5fdff;line-height:1.5;overflow-y:overlay;"
hidden>
<b style="font-size:16px;">Ordinal Explorer Online</b>
<div id="reset" style="
background:#ffffd0;
margin-top:10px;
min-width:180px;
min-height:21px;
text-align:center;
float:left;
outline:1px solid #909090;
border-radius:5px;
line-height:1.5;
opacity:0.4;
font-size:14px;
cursor:pointer;
">Reset list</div
>

<div style="
float:left;
min-height:16px;
min-width:10px;
"></div><div id="decef" style="
float:left;
outline:1px solid #909090;
border-radius:5px 0 0 5px;
min-height:16px;
line-height:16px;
text-align:center;
padding:3px 5px;
font-size:20px;
background:#ffffd0;
opacity:0.4;
cursor:default;
">◅</div><div id="ecfv" style="
float:left;
outlinea:1px solid #909090;
min-width:70px;
max-width:70px;
min-height:16px;
margin-left:1px;
padding:0 20px;
font-size:11px;
line-height:1;
backgrounda:#ffffff;
cursor:pointer;
">strings per<br/>expansion: 1</div><div id="incef" style="
float:left;
outline:1px solid #909090;
min-height:16px;
line-height:16px;
border-radius:0 5px 5px 0;
margin-left:1px;
padding:3px 5px;
font-size:20px;
background:#d0ffd0;
cursor:pointer;
">▻</div>

<div id="sugarbutton0" class="subu" style="
min-width:32px;
">sugar</div
><br style="clear:both"/>
<div id="switchindentmode" align="left" style="font-size:12px;clear:both;">            Indentation mode:
<div id="indentmode2" style="
float:left;
outline:1px solid #909090;
border-radius:5px 0 0 5px;
min-width:39px;
min-height:34px;
text-align:center;
padding:3px 5px;
font-size:12px;
line-height:34px;
background:#ffffff;
cursor:pointer;
">NO</div><div id="indentmode1" style="
float:left;
outline:1px solid #909090;
min-width:40px;
min-height:34px;
margin-left:1px;
padding:3px 5px;
font-size:11px;
line-height:1;
background:#ffffff;
cursor:pointer;
">fundamental<br/>sequence<br/>alignment</div><div id="indentmode0" style="
float:left;
outline:1px solid #909090;
min-width:40px;
min-height:34px;
border-radius:0 5px 5px 0;
margin-left:1px;
padding:3px 5px;
font-size:11px;
line-height:1;
background:#ffffff;
cursor:pointer;
">recursive<br/>expansion<br/>alignment</div></div>


<div id="vtext" style="
background:#d0ffd0;
margin-top:7px;
margin-bottom:10px;
margin-right:30px;
min-width:180px;
min-height:21px;
text-align:center;
float:left;
outline:1px solid #909090;
border-radius:5px;
line-height: 21px;
font-size:12px;
cursor:pointer;
">text near mouse cursor</div
>
<div style="
float:left;
min-height:16px;
min-width:10px;
"></div><div id="decd" style="
float:left;
outline:1px solid #909090;
border-radius:5px 0 0 5px;
min-height:16px;
line-height:16px;
text-align:center;
padding:3px 5px;
font-size:20px;
background:#ffffd0;
cursor:pointer;
">◅</div><div id="dis" style="
float:left;
outlinea:1px solid #909090;
min-width:70px;
max-width:70px;
min-height:16px;
margin-left:1px;
padding:0 20px;
font-size:11px;
line-height:1;
backgrounda:#ffffff;
cursor:pointer;
"></div><div id="incd" style="
float:left;
outline:1px solid #909090;
min-height:16px;
line-height:16px;
border-radius:0 5px 5px 0;
margin-left:1px;
padding:3px 5px;
font-size:20px;
background:#d0ffd0;
cursor:pointer;
">▻</div>

<span style="font-size:11px">    last updated: 27 February 2023</span>
  <a id="oldversionlink" style="font-size:11px" href="Ordinal Explorer (versions).htm">old versions and other projects</a>
</span><span id="listc" style="
float:left;
line-height:2;
position:absolute;
top:0;
bottom:0;
padding-bottom:32px;
left:0;
right:0;
overflow-x:overlay;
overflow-y:auto;
display:flex;
flex-direction:column-reverse;
" onmousedown="return false"><div><div
 id="mulmark" align="center" style="
position:absolute;
min-width:20px;
min-height:20px;
max-width:20px;
max-height:20px;
font-size:20px;
line-height:0.7;
border:1px solid #909090;
border-radius:8px;
padding:0;
background:#d0d0ff;
cursor:pointer;
" hidden>↑</div><div
 id="expmark" align="center" style="
position:absolute;
min-width:20px;
min-height:20px;
max-width:20px;
max-height:20px;
font-size:28px;
line-height:0.7;
border:1px solid #909090;
border-radius:8px;
padding:0;
margina-left:-15px;
background:#d0ffd0;
cursor:pointer;
letter-spacing:-6px;
" hidden>+<sup style="font-size:11px;vertical-align:11px">+</sup>    </div><div
 id="smexmark" align="center" style="
position:absolute;
min-width:20px;
min-height:20px;
max-width:20px;
max-height:20px;
font-size:16px;
line-height:1.2;
border:1px solid #909090;
border-radius:8px;
padding:0;
background:#e0ffff;
cursor:pointer;
" hidden>+</div><div
 id="colmark" align="center" style="
position:absolute;
min-width:20px;
min-height:20px;
max-width:20px;
max-height:20px;
font-size:28px;
line-height:0.57;
border:1px solid #909090;
border-radius:8px;
padding:0;
background:#fff0b0;
cursor:pointer;
" hidden>-</div><ul style="padding-left:104px;float:left;min-width:calc(100% - 104px);" id="list"
></ul></span><span id="vsidebars" onmousedown="return false" style="
background:#e0ffe0;
line-height:0.5;
position:fixed;
right:17px;
top:0;
float:right;
font-size:25px
"><table>
<tr>
<td id="vsidebar" style="line-height:0.5;font-size:25px">«</td>
</tr>
</table></span><span id="counter" onmousedown="return false" style="position:fixed;right:30px;bottom:14px;float:right;font-size:12px;cursor:default"
></span><div id="xs" style="position:fixed;border:1px solid #cccccc;border-radius:5px;padding:5px 15px 5px 15px;"
hidden>
`;

let scriptcode1=`
'use strict'

window.addEventListener("keydown", function(e) {
   if(["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.code) > -1) {
      e.preventDefault();
   }
}, false);

function mod(n,m)
{
return (n%m+m)%m;
}

// get position of last symbol '[' of string st
function getls(st){
let e=st.length;
let np=0;
while((e>-1)&&(np!=0||st[e]!='[')){
   e--;
   if (st[e]=='[') np--;
   else if (st[e]=='!') np++;}
return e;}

// get position of first symbol '!' of string st
function getfs(st){
let e=-1;
let np=0;
while((e<st.length)&&(np!=0||st[e]!='!')){
   e++;
   if (st[e]=='[') np--;
   else if (st[e]=='!') np++;}
return e;}

// create base]booster[ string
function bb(base,booster){
return base+'['+booster+'!';}

// get base of string st
function base(st){
return st.slice(0,getls(st));}

// get booster of string st
function booster(st){
return st.slice(getls(st)+1,-1);}

function antibb(antibooster,antibase){
return '['+antibooster+'!'+antibase;}

function antibase(st){
return st.slice(getfs(st)+1);}

function antibooster(st){
return st.slice(1,getfs(st));}

function convertc(st)
{
if(sugar[0])
   return convert(st);
return st;
}

function pl(c)
{
let e=0;
let l=c.previousSibling;

while(l==null){
   e++;
   c=c.parentNode;
   l=c.previousSibling;}  
   
while(l&&l.tagName!='LI'){
   e--;
   l=l.lastChild;}
return [l,e];
}

function nl(c)
{
let l=c.nextSibling;

while(l==null){
   c=c.parentNode;
   l=c.nextSibling;}  
   
while(l&&l.tagName!='LI')
   l=l.firstChild;
return l;
}

function cl(c)
{
while(c.lastChild.tagName==ulnar[indentvisible])
    c=c.lastChild;
return c;
}

// small expansion of c
function smallexp(c,n=0){
if(c.id==zerostring)
   return 0;
let l=pl(c)[0];
if(issuccessor(c.id)&&l.id==fs(c.id,0))
   return 0;
  
count++;
let s;
if(c.id==prevsmallexp)
   {s=fs(c.id,nextsmallexpn);
   nextsmallexpn++;
   n=nextsmallexpn;}
else
   {do{s=fs(c.id,n);
      n++;}
   while(l.id!=minusonestring&&compare(s,l.id)<1);
   prevsmallexp=c.id;
   nextsmallexpn=n;
   }
let x=document.createElement('li');
x.id=s;
x.innerHTML=convertc(s);
if(s==leastordinal||(issuccessor(s)&&l.id==fs(s,0)))
   x.style.cursor='default';
if(indentmode)
   if(c.previousSibling&&c.previousSibling.tagName==ulnar[indentvisible])
      l.insertAdjacentHTML('afterend',x.outerHTML);     
   else
      {let y=document.createElement(ulnar[indentvisible]);
      y.innerHTML=x.outerHTML;
      c.insertAdjacentHTML('beforebegin',y.outerHTML); 
      }  
else
	if(c.previousSibling==null)
	   c.insertAdjacentHTML('beforebegin',x.outerHTML);
	else
	   {let y=document.createElement(ulnar[indentvisible]);
      y.innerHTML=x.outerHTML;
	   l.insertAdjacentHTML('afterend',y.outerHTML); 
	   }
return n;  	
}

function smallexpefs(c,extra){
if(c.id=='')
   return 0;
let e=0;
let n=0;
do {
	n=smallexp(c,n);
	e++;}
while(n&&e<=extra);
}	

function smallexpefslong(c,l,extra){
let q;
do
   {q=pl(c)[0];
   smallexpefs(c,extra);
   c=q;}
while(c!=l);
}	

function singleexp(c,extra){
let n;
let l=pl(c)[0];
let q=c;
do {

	n=smallexp(q,0);
	if(n)
	   q=pl(q)[0];}
while(n);
if(extra)
   smallexpefslong(c,l,extra-1);
}	

function singleexplong(c,l,extra){
let q;
do
   {q=pl(c)[0];
   singleexp(c,extra);
   c=q;}
while(c!=l);
}	

function multipleexp(c,extra,n)
{
if(!nextl)
	nextl=pl(c)[0];
	do 
	   {
	   n--;
	   singleexplong(c,nextl,n?0:extra);
	   }
   while(n);
}	

function countli(c){
if(c.tagName=='LI')
   return 1;
let n=0;   
for(let l=c.firstChild;l!=null;l=l.nextSibling)
   if(l.tagName==ulnar[indentvisible])
      n+=countli(l);
   else  
      n++;
return n;      
}

function expcolmarksupdate()
{
let r=markedli.getBoundingClientRect();
let h=r.left-27+listc.scrollLeft;
let vc=listc.scrollTop+(r.top+r.bottom)/2;
let s=markedli.previousSibling;
let a=0;
let t=!markedli.id.length?false:markedli.id.length<2||markedli.id.slice(-2,-1)!='['||pl(markedli)[0].id!=markedli.id.slice(0,-2);
if(s&&s.id!=minusonestring&&(!indentmode||s.tagName==ulnar[indentvisible]))
   {
   colmark.style.left=h-a+'px';
   colmark.style.top=vc-11+'px';
   colmark.hidden=false;
   a+=24;
   }
else
	colmark.hidden=true;
if(markedli.id&&t)
   {	
   smexmark.style.left=h-a+'px';
   smexmark.style.top=vc-11+'px';
   smexmark.hidden=false;
   a+=24;   
   expmark.style.left=h-a+'px';
   expmark.style.top=vc-11+'px';
   expmark.hidden=false;
   a+=24;
   }
else
   {
	smexmark.hidden=true;
	expmark.hidden=true;
	}
if(mulcounter>1&&t)
   {
   mulmark.style.left=h-a+'px';
   mulmark.style.top=vc-11+'px';
   mulmark.hidden=false;
   a+=24;
   }
else
	mulmark.hidden=true;
}

function setmarkedli(c,b=true){
if(markedli)
   markedli.style.outline='';
markedli=c;
markedli.style.outline='1px solid gainsboro';
if(b)
   {
   nextl='';
   mulcounter=1;
   }
expcolmarksupdate();
}

function removebackground(c)
{
if(c==markedli)
   c.style.background='';
else
	c.removeAttribute('style');
}

function formatting(c=list)
{
let l=lea?lea:markedli;
let r=l.getBoundingClientRect();
let vc=(r.top+r.bottom)/2;

for(let l=c.firstChild;l!=null;l=l.nextSibling)
   if(l.tagName==ulnar[indentvisible])
      formatting(l);
   else if(l.id!=minusonestring)
      l.innerHTML=convertc(l.id);
expcolmarksupdate();

r=l.getBoundingClientRect();
listc.scrollTop+=(r.top+r.bottom)/2-vc;
scrollli(l);
}

function updateli(c){
if(c)
if(c.id)
   c=document.getElementById(c.id);
else
   {
   c=nl(document.getElementById(minusonestring));
   while(c.tagName==ulnar[indentvisible])
    	c=c.FirstChild;
   }
return c;
}

function psb(b=false){
if(b)
   ps.forEach(function(i)
      {
      removebackground(i);
      });
else
   ps.forEach(function(i)
      {
      i.style.background=eo>1?'#f8f8ff':'#fffff0';
      });
}

function mousetextupdate(x,y)
{
xs.style.left=x+(x*2<window.innerWidth||25*Math.round(x/25)+15+xs.offsetWidth<window.innerWidth?35:-xs.offsetWidth-15)+'px';
xs.style.top=y-(y*2<window.innerHeight||25*Math.round(y/25)-50+xs.offsetHeight<window.innerHeight?(vero?-18:5):xs.offsetHeight-(vero+30))+'px';
}

document.onmousemove=function(e)
{
mousex=e.clientX;
mousey=e.clientY;
mousetextupdate(mousex,mousey);
}

function mouseoverupdate(c='')
{
if(mousex)
   {
   if(!c)
      c=document.elementFromPoint(mousex, mousey);
   let u=new Event('mouseover');
   Object.defineProperty(u,'target',{value:c});
   document.dispatchEvent(u);
   }
}

function setps(c,n='')
{
let q=c.previousSibling;
exb[0]=q&&(indentmode?q.tagName==ulnar[indentvisible]:q.id!=minusonestring);
exb[1]=c.id!=leastordinal&&(!issuccessor(c.id)||pl(c)[0].id!=fs(c.id,0));
ps=[];

if(exb[0])
if(n)
   {
   q=pl(c)[0];
   pairl[0]=n;
   do
      {
      ps.push(q);
      q=pl(q)[0];
      }
   while(q!=pairl[0]&&q.offsetTop+q.offsetHeight>listc.scrollTop-10);
   }
else if(indentmode) 
   {
   q=q.lastChild;
   pairl[0]=q.previousSibling;
   if(!pairl[0])
      pairl[0]=pl(q)[0];
   else if(pairl[0].tagName==ulnar[indentvisible])
      pairl[0]=pl(pairl[0])[0];
   do
     {
     ps.push(q);
     q=pl(q)[0];
     }
   while(q!=pairl[0]);
   }
else
   {
   let cc=q;
   if(q.tagName==ulnar[indentvisible])
      {
      cc=cl(cc);
      pairl[0]=cc.previousSibling;
      cc=cc.lastChild;
      }
   else
      pairl[0]=q.parentNode.previousSibling;
   while(cc)
      {
      ps.push(cc);
      cc=cc.previousSibling;
      }
   }
else
   {
   pairb[0]=false;
   pairl[0]=document.getElementById(minusonestring);
   }
         	 
if(exb[1])
   {
   pairl[1]=pl(c)[0];
   pairb[1]=pairl[1].id!=minusonestring;
   }
else
   {
   pairb[1]=false; 
   pairl[1]=document.getElementById(minusonestring);
   }
}

function expwords(n)
{
return n<10?exp[n]:'Recursivly expand';
}

listc.onscroll=function(e)
{
mousetag='';mousetagp=xs;
mouseoverupdate();
}

window.onresize=function(e)
{
mouseoverupdate(listc);
mouseoverupdate();
expcolmarksupdate();
}

document.onmouseover=function(e)
{
if(e.target&&processing)
{
let onli=xs.hidden;
if(mousetag!=e.target&&!mousetagp.contains(e.target))
{
keytcheck=true;
vero=70;
onli=false;
let c=e.target;
mousetag=c;
mousetagp=xs;
while(c.tagName=='SUB'||c.tagName=='SUP'||c.tagName=='BIG'||c.tagName=='SMALL')
   c=c.parentNode;
if(lea){
   removebackground(lea);
   psb(true);
   removebackground(pairl[0]);
   removebackground(pairl[1]);
   }
let h;
if(c.id=='counter'){
   h='<small>Total number of ordinals in the list</small>';
   xs.style.background='#ffffff';
   vero=0;
   }
else if(c.id=='oldversionlink'){
   h='<small>Link to old versions and other projects</small>';
   }
else if(c.id=='reset'){
   h='<div id="res1"'+(count>1?'':' style="font-style:italic"')+'><nobr id="res2"'+(count>1?' style="font-weight:bold"':'')+'>Reset list</nobr></div><i>use "R" key</i>';
   if(count>1)
      xs.style.background='#fffff0';
   }
else if(c.id=='vtext'){
   h='<b>Hide</b> text near mouse cursor<br/><i>use "T" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='vsidebar'){
   h='<b>'+(sidebar.hidden?'Show':'Hide')+'</b> options<br/><i>use "Tab" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='decef'){
   h='<div id="decd1"'+(efs>0?'':' style="font-style:italic"')+'><nobr id="decd2"'+(efs>0?' style="font-weight:bold"':'')+'>Decrease</nobr> maximal number of new strings per expansion</div><i>use "-" key</i>';
   if(efs>0) 
      xs.style.background='#fffff0';
   }
else if(c.id=='incef'){
   h='<b>Increase</b> maximal number of new strings per expansion<br/><i>use "+" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='sugarbutton0'){
   h='<small>Enable / disable syntactic sugar</small>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='decd'){
   h='<small><div id="dec1" style="line-height:1.2'+(di>0?'':' ;font-style:italic')+'"><nobr id="dec2"'+(di>0?' style="font-weight:bold"':'')+'>Decrease</nobr> maximal number of<br/>fundamental sequence elements,<br/>displayed near mouse cursor</div></small><i>use "<" key</i>';
   if(di>0) 
      xs.style.background='#fffff0';
   }
else if(c.id=='incd'){
   h='<small><div style="line-height:1.2"><b>Increase</b> maximal number of<br/>fundamental sequence elements,<br/>displayed near mouse cursor</div></small><i>use ">" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='ecfv'){
   h='<small><small><div style="line-height:1">Maximal number of new strings per expansion.</div></small></small>'; 
   xs.style.background='#fff';
   }
else if(c.id=='dis'){
   h='<small><small><div style="line-height:1">Maximal number of fundamental sequence elements, displayed near mouse cursor.</div></small></small>'; 
   xs.style.background='#fff';
   }    
else if(c.id=='indentmode2'){
   h='<small>No indentation</small><br/><i>use "J" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='indentmode1'){
   h='<small>Indentation, aligned by fundamental sequences</small><br/><i>use "K" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id=='indentmode0'){
   h='<small>Indentation, aligned by recursive expansions</small><br/><i>use "L" key</i>';
   xs.style.background='#f0fff0';
   }
else if(c.id!='xs'&&!xs.contains(c)){

let eo1=-3;
vero=0;
if(c.id=='mulmark'||c.id=='expmark'||c.id=='smexmark'||c.id=='colmark')
   {
   eo1=eo;
   eo=c.id=='mulmark'?mulcounter:c.id=='expmark'?1:c.id=='smexmark'?0:-1;
   c=markedli;
   vero=70;
   }
   
   if(eo1==-3&&c!=mousetag&&c.tagName=='LI')
      mousetagp=c;
   h='<nobr id="ex1">'+expwords(eo)+'</nobr>';
   xs.style.background='#fff';
   h+='<span id="extra1" hidden> with <nobr id="extra2">'+efs+'</nobr> extra fs element<nobr id="extra3">'+(efs==1?'':'s')+'</nobr></span>';
   if(c.tagName=='LI')
      {
      lea=c;

      setps(c,eo1>-3&&eo>1?nextl:'');

      let i=eo<0||c!=markedli?0:1;
      let b=exb[i]; 
      h+='<span id="ex4"'+(b?'':' hidden')+'> ';
      let l=eo1>-3&&eo>1?nextl:pairl[i];
      
      
      if(eo>1)
         h+='all '+multicount+' strings'+(l.id==minusonestring?'':(' from '+l.innerHTML))+' up to ';
      
      
      h+=c.innerHTML;
      if(b&&eo!=-2&&c==markedli){
         xs.style.background=i==0?'#fffaf0':eo1>-3&&eo>1?'#f0f0ff':eo>0?'#f0fff0':'#f0ffff';
         l.style.background=i==0?'#fffae0':eo1>-3&&eo>1?'#e0e0ff':eo>0?'#f4fff7':'#f4ffff';
         c.style.background=i==0?'#fff0e0':eo1>-3&&eo>1?'#e0d0ff':eo>0?'#e0ffe0':'#f0ffff';
         if(i==0||(eo1>-3&&eo>1))
            psb();
         }
      else if(c!=markedli)
         {
         xs.style.background='#fff';
         c.style.background='#fbfbfb';
         }
      else
         {
         xs.style.background='#fafafa';
         c.style.background='#fbfbfb';
         }
      h+='</span>'; 
      h='<div id="ex7"'+(!b||((eo==-2||c!=markedli)&&c.tagName=='LI')?' hidden':'')+'><span id="ex6" style="font-weight:'+(b?'bolda':'normal')+';font-style:'+(b?'normal':'italic')+'">'+h+'</b>';        
      if(eo1>-3&&markedli.id==initlargeordinal)
         {
         h+=' ';
         vero=36;
         }
      else
         h+='<br/>'
      h+='<i><small>(use "'+(eo>1?'C':eo>0?'Enter':eo<0?'Backspace':'Space')+'" key)</small></i></span>';
      
      if(eo1==-3)
      {
      h+='<br/></div><b>'+c.innerHTML+'</b><span'+(false?'':' id="fsd"')+(di>0?'':' hidden')+'><br/>fs:'; 
      if(c.id==zerostring)
         h+='<br>'+'   <i>empty</i>';
      else
         {
         fsn=0;
         fsp=!issuccessor(c.id);
         fsl=c.id;
      	for(let i=0;i<(fsp?di:1);i++)
      	   {
      	   if(vt)h+='<li id="fselement'+fsn+'">   '+i+': '+convertc(fs(fsl,fsn))+'</li>';
      	   fsn++;
      	   }
      	if(fsp)      
   	      h+='<li id="dots">   ... '+(gtkey||ltkey?'<i><small>(use "<", ">" keys)</small></i>':'')+'</li>';   
   	   }
   	}
   	   
   	h+='</span>';                  
      }
   else
      {
      h='<div id="ex7"'+((eo==-2||c!=markedli)&&c.tagName=='LI'?' hidden':'')+'>'+h+'</div>';
      onli=true;
      }
   if(eo1>-3)
      eo=eo1;
   }
else
   lea='';
xs.innerHTML=h;}
xs.hidden=!vt||onli;
mousetextupdate(mousex,mousey);  
}
}

document.onmouseleave=function(e)
{
mouseoverupdate(listc);
xs.hidden=true;
}

function scrollli(c)
{
if(c)
{let lx=listc.scrollLeft;
let ly=listc.scrollTop;
$(c).wrapInner('<ul1 style="padding-right: 27px">');
let u=c.firstChild;
let r=u.getBoundingClientRect();
let rc=c.getBoundingClientRect();
let r1=listc.getBoundingClientRect();
let bx=r.left<r1.left?-1:r.right>r1.right?1:0;
let by=rc.top<r1.top+3?-1:rc.bottom>r1.bottom-3?1:0;
if(by<0)
   if(c.id=='')
      listc.scrollTop=-listc.scrollHeight;
   else
      {u.scrollIntoView({inline: 'end'});
      listc.scrollTop-=3+r.top-rc.top;}
else 
   if(by>0)
   {listc.style.overflowX='auto';
   if(c.id==initlargeordinal)
      listc.scrollTop=0;
   else
      {u.scrollIntoView({block: 'end', inline: 'end'});
      listc.scrollTop+=3-r.bottom+rc.bottom;}
   listc.style.overflowX='overlay';
   }
else
	u.scrollIntoView({inline: 'end'});
if(!bx)
   listc.scrollLeft=lx;
if(!by)
   listc.scrollTop=ly;
u.removeAttribute('style');
$(u).contents().unwrap();}
}

list.onclick=function(e)
{
processing=false;
let initscroll=listc.scrollTop;
let c=e.target;
while(c.tagName=='SUB'||c.tagName=='SUP'||c.tagName=='SMALL')
   c=c.parentNode;
if(c.id!='list'&&c.tagName=='LI'){
   if(!nextlb)
      {
      nextl='';
      mulcounter=1;
      }
if(c!=markedli)
   setmarkedli(c)
else if(c.id!=''){
   if(eo!=-2){
   countdifference=count;
   let sc;
   let sc1=c;
   if(eo<0){
   setps(c);
   c=c.previousSibling;
   if(c!=null)
   {if(indentmode)
      {if(c.tagName==ulnar[indentvisible])
         {ps.forEach(function(i){
            while(i.parentNode.childElementCount==1)
               $(i).unwrap();
            i.remove();
            count--;
            });
         prevsmallexp=minusonestring;
         }
      }
   else {if(c.id!=minusonestring)
   {prevsmallexp=minusonestring;
   if(c.tagName==ulnar[indentvisible])
      {c=cl(c);             
      count-=countli(c);
      sc=c.previousSibling;   
      c.remove();
      }
   else{
      let q=c;
      sc=c.parentNode.previousSibling;
      while(c!=null){        
         c=c.previousSibling;
         count-=countli(q);
         q.remove();
         q=c;}
      }
   }
   }
   }}
   else
      {
      if(eo==0)
         smallexpefs(c,efs);
      else
      	multipleexp(c,efs,eo);
      scrollli(pl(c)[0]);
      }
       
   counter.innerHTML='Counter: '+count;
   reset.style.opacity=count==1?0.4:1;
   countdifference=count-countdifference;
   mouseoverupdate(sc1);
   expcolmarksupdate();
   }
}}
listc.scrollTop=initscroll;
processing=true;
mousetag='';mousetagp=xs;
mouseoverupdate();
}

function seteo(i)
{
eo=i;
}

function doexpcol(c)
{
let eo1=eo;
seteo(c=='Space'?0:c=='Backspace'?-1:1);
let m=markedli.id;
if(c=='KeyC')
   {
   nextlb=true;
   if(m.length<4||m.slice(-4)!='[[!!')
      mulcounter++;
   }
else
   {
   multicount=1;
   if(c=='Enter')
      {
      nextlb=true;
      nextl='';
      if(m.length<4||m.slice(-4)!='[[!!')
         mulcounter=2;
      }
   }
mouseoverupdate(markedli);
markedli.click();
if(c=='KeyC'||c=='Enter')
   multicount+=countdifference;
//scrolly(markedli);
scrollli(markedli);
seteo(eo1);
mousetag='';mousetagp=xs;
mouseoverupdate();
nextlb=false;
expcolmarksupdate();
}

mulmark.onclick=function(e){
doexpcol('KeyC');
}

expmark.onclick=function(e){
doexpcol('Enter');
}

smexmark.onclick=function(e){
doexpcol('Space');
}

colmark.onclick=function(e){
doexpcol('Backspace');
}

function sugarbuttonupdate()
{
let c;
let e=0;
if(sugarbuttonnumber[e])
   {
   c=document.getElementById('sugarbutton'+e);
   c.style.background=sugar[e]?sugarbuttoncolor[e]:'#fff';
   }
}

function sugarbuttonclick(e)
{
sugar[e]=1-sugar[e];
sugarbuttonupdate();
formatting();
}

function sugarbuttonswitch(e,n)
{
if(sugar[e]!=n)
   {
   sugar[e]=1-sugar[e];
   sugarbuttonupdate();
   formatting();
   }
}

function defaultsugar(i=1)
{
sugar=[...sugardefault[i]];
sugarbuttonupdate();
formatting();
}

sugarbutton0.onclick=function(e)
{
sugarbuttonclick(0);
}

switchindentmode.onclick=function(e){
let c=e.target;
if(c.tagName=='DIV'){
   let i=parseInt(c.id[10]);
   if(i==2&&indentvisible)
      {
      let u=new KeyboardEvent("keydown",{code:"KeyJ"});
      document.dispatchEvent(u);
      }
   else if(i<2&&(!indentvisible||i!=indentmode))
      {
      let u=new KeyboardEvent("keydown",{code:i?"KeyK":"KeyL"});
      document.dispatchEvent(u);
      }
   }
}

vtext.onclick=function(e){
let c=e.target;
if(vt){
   c.style.background='#fff';
   vt=false;
   xs.hidden=true;
   }
else{
   c.style.background='#d0ffd0';
   vt=true;
   xs.hidden=false;
   mouseoverupdate();
   }      
}

vsidebar.onclick=function(e)
{
if(sidebar.hidden){
   sidebar.hidden=false;
   listc.style.right='240px';
   listc.style.overflowY='overlay';
   list.style.minWidth='calc(100% - 121px)';
   vsidebars.style.right='257px';
   counter.style.right='260px';
   vsidebar.innerHTML='»';
   }
else{
   sidebar.hidden=true;
   listc.style.right='0';
   listc.style.overflowY='auto';
   let ssw=listc.scrollWidth-listc.clientWidth;
   if(listc.scrollLeft>=ssw-17)
      listc.scrollLeft=ssw;
   list.style.minWidth='calc(100% - 104px)';
   vsidebars.style.right='17px';
   counter.style.right='30px';
   vsidebar.innerHTML='«';
   }  
}

decef.onclick=function(e)
{
if(efs>0){
   efs--;
   ecfv.innerHTML='strings per<br/>expansion: '+(efs+1);
   if(efs==0){
      decef.style.opacity=0.4;
      decef.style.cursor='default';
      xs.style.background='#fff';
      if(document.getElementById('decd1')!=null){
         decd1.style['font-style']='italic';
         decd2.style['font-weight']='normal';
         }
      } 	
   }      
}

incef.onclick=function(e)
{
efs++;
ecfv.innerHTML='strings per<br/>expansion: '+(efs+1);
if(efs==1){
   decef.style.opacity=1;
   decef.style.cursor='pointer';
   }    
}

decd.onclick=function(e){
if(di>0){
   di--;
   dis.innerHTML='displayed<br/>fs elements: '+di;
   if(di==0){
      decd.style.opacity=0.4;
      decd.style.cursor='default';
      xs.style.background='#fff';
      if(document.getElementById('dec1')!=null){
         dec1.style['font-style']='italic';
         dec2.style['font-weight']='normal';
         }
      } 	
   }      
}

incd.onclick=function(e){
di++;
dis.innerHTML='displayed<br/>fs elements: '+di;
if(di==1){
   decd.style.opacity=1;
   decd.style.cursor='pointer';
   }    
}

function resetlist(m=uncountablemode)
{
ps=[];
nextl='';
mulcounter=1;
multicount=1;
prevsmallexp=minusonestring;
list.innerHTML='<li id="-" hidden></li>';
let y=document.createElement('li');
y.id=initlargeordinal;
y.innerHTML=convertc(initlargeordinal);
document.getElementById(minusonestring).insertAdjacentHTML('afterend',y.outerHTML);
setmarkedli(document.getElementById(initlargeordinal));
count=1;
counter.innerHTML='Counter: 1';
window.scrollTo(0,0);
reset.style.opacity=0.4;
if(document.getElementById('res2')!=null)
   {
   xs.style.background='#fff';
   res1.style['font-style']='italic';
   res2.style['font-weight']='normal';
   }
else if(document.getElementById('res3')!=null)
   res3.innerHTML='Set '+(uncountablemode?'':'un')+'countable mode and reset list';
sugarbuttonupdate();
mouseoverupdate();
}

function indentul0(c)
{
if(c.childElementCount<1)
   {$(c).contents().unwrap();
   return;}
if(c.childElementCount>1)
   {$(c).wrapInner('<'+ulnar[indentvisible]+'>');
   c=c.firstChild;
   c.before(c.firstChild);
   if (c.previousSibling.tagName==ulnar[indentvisible])
      {indentul0(c.previousSibling);
      $(c.previousSibling).contents().unwrap();
      indentul0(c);
      $(c).contents().unwrap();
      }
   else
      indentul0(c);
   }
}

function indentul1(c){
if(c.childElementCount<1)
   {$(c).contents().unwrap();
   return;}
if(c.childElementCount>1)
   {$(c).wrapInner('<'+ulnar[indentvisible]+'>');
   c=c.lastChild;
   c.after(c.lastChild);
   if (c.nextSibling.tagName==ulnar[indentvisible])
      {indentul1(c.nextSibling);
      $(c.nextSibling).contents().unwrap();
      indentul1(c);
      $(c).contents().unwrap();
      }
   else
      indentul1(c);
   }
}

function indenttransform()
{
indentmode=1-indentmode;
if(list.childElementCount==3)
if(indentmode)
   indentul1(list.children[1]);
else
   indentul0(list.children[1]);
}

function indentvisibletransform(e,b=true){
   {
   e.childNodes.forEach(function(i){
      if(i.tagName==ulnar[1-indentvisible])
         indentvisibletransform(i);
      });
   if(b)
      $(e).replaceWith('<'+ulnar[indentvisible]+'>'+$(e).html()+'</'+ulnar[indentvisible]+'>');
   }
}

reset.onclick=function(e)
{
resetlist();
}


document.addEventListener('keydown',function(e){
if(!e.ctrlKey){
let c=e.code;
if(c=='Minus'||c=='NumpadSubtract'){
if(efs>0){
   efs--;
   ecfv.innerHTML='strings per<br/>expansion: '+(efs+1);
   if(document.getElementById('extra1')!=null){
      if(efs==0)
         extra1.hidden=true;
      extra2.innerHTML=efs;
      extra3.innerHTML=efs==1?'':'s';   
      }    
   if(efs==0){
      decef.style.opacity=0.4;
      decef.style.cursor='default';
      if(document.getElementById('decd1')!=null){
         xs.style.background='#fff';
         decd1.style['font-style']='italic';
         decd2.style['font-weight']='normal'; 
         }            
      }
   }
}     	
else if(c=='Equal'||c=='NumpadAdd'){
   efs++;
   ecfv.innerHTML='strings per<br/>expansion: '+(efs+1);
   if(document.getElementById('extra1')!=null){
      if(efs==1&&eo>=0)
         extra1.hidden=false;
      extra2.innerHTML=efs;
      extra3.innerHTML=efs==1?'':'s';   
      }     
   if(efs==1){
      decef.style.opacity=1;
      decef.style.cursor='pointer';
      if(document.getElementById('decd1')!=null){
         xs.style.background='#fffff0';
         decd1.style['font-style']='normal';
         decd2.style['font-weight']='bold';
         }
      }    	 	
   }
else if(c=='Comma'){
if(di>0){
   di--;
   if(ltkey){
      ltkey--;
      if(!gtkey&&!ltkey&&typeof dots!=='undefined')dots.innerHTML='   ... ';
      }
   dis.innerHTML='displayed<br/>fs elements: '+di;
   if(document.getElementById('fsd')!=null){
      if(fsp){
      	fsn--;
      	if(typeof dots!=='undefined')
            dots.previousSibling.remove();}             
      if(di==0)
         fsd.hidden=true;}        
   if(di==0){
      decd.style.opacity=0.4;
      decd.style.cursor='default';
      if(document.getElementById('dec1')!=null)
         {
         xs.style.background='#fff';
         dec1.style['font-style']='italic';
         dec2.style['font-weight']='normal'; 
         }                
      }
   }
}
else if(c=='Period'){
   di++;
   if(gtkey){
      gtkey--;
      if(!gtkey&&!ltkey&&typeof dots!=='undefined')dots.innerHTML='   ... ';
      }
   dis.innerHTML='displayed<br/>fs elements: '+di;
   if(document.getElementById('fsd')!=null){ 
      if(fsp){     	
         let y=document.createElement('li');
         y.id='fselement'+fsn;
         y.innerHTML='   '+(di-1)+': '+convertc(fs(fsl,fsn));
         fsn++;
         if(typeof dots!=='undefined')
            dots.insertAdjacentHTML('beforebegin',y.outerHTML);}                
      if(di==1)
         fsd.hidden=false;}       
   if(di==1)
      {
      decd.style.opacity=1;
      decd.style.cursor='pointer';
      if(document.getElementById('dec1')!=null){
         xs.style.background='#fffff0';
         dec1.style['font-style']='normal';
         dec2.style['font-weight']='bold';
         }     
      }
   }
else if(c=='KeyT')
if(vt)
   {
   vtext.style.background='#fff';
   vt=false;
   xs.hidden=true;
   keytcheck=false;
   }
else
   {
   vtext.style.background='#d0ffd0';
   vt=true;
   if (xs.innerText.slice(0,exp[0].length)!=exp[0])
      xs.hidden=false;
   if(keytcheck) 
      {mousetag='';mousetagp=xs;
      mouseoverupdate();}
   }
else if(c=='Tab'){
e.preventDefault();
if(sidebar.hidden){
   sidebar.hidden=false;
   listc.style.right='240px';
   listc.style.overflowY='overlay';
   listc.scrollBy(240,0);
   list.style.minWidth='calc(100% - 121px)';
   vsidebars.style.right='257px';
   counter.style.right='260px';
   vsidebar.innerHTML='»';
   }
else{
   listc.scrollBy(-240,0);
   sidebar.hidden=true;
   listc.style.right='0';
   listc.style.overflowY='auto';
   let ssw=listc.scrollWidth-listc.clientWidth;
   if(listc.scrollLeft>=ssw-17)
      listc.scrollLeft=ssw;
   list.style.minWidth='calc(100% - 104px)';
   vsidebars.style.right='17px';
   counter.style.right='30px';
   vsidebar.innerHTML='«';
   }
}
else if(c=='KeyR'){
   resetlist();}
else if(c=='KeyI')
   {
   if(sugar[0]||!sugar[1])
      {
      sugar[0]=0;
      sugar[1]=1;
      sugarbuttonupdate();
      formatting();
      }
   }
else if(c=='KeyO')
   {
   if(JSON.stringify(sugar)!=JSON.stringify(sugardefault[0]))
      defaultsugar(0);
   }
else if(c=='KeyP')
   {
   if(JSON.stringify(sugar)!=JSON.stringify(sugardefault[1]))
      defaultsugar();
   }
else if(c=='KeyJ'||c=='KeyK'||c=='KeyL'){
   let i=c=='KeyJ'?2:c=='KeyK'?1:0;
   if(i==2&&indentvisible)
      {
      indentar[indentmode].style.background='#fff';
      indentar[2].style.background='#d0ffd0';
      }
   else if(i<2&&(!indentvisible||i!=indentmode))
      {
   	indentar[2].style.background='#fff';
   	indentar[indentmode].style.background='#fff';
      indentar[i].style.background='#d0ffd0';
      }
  if((c=='KeyK'&&!indentmode)||(c=='KeyL'&&indentmode))
      {
      //let initscroll=listc.scrollTop;
      indenttransform();
      mousetag='';
      if(lea&&lea.style.background)
        {scrollli(lea);
         scrollli(pairl[1]);}
      mouseoverupdate();
      }
   if(((c=='KeyK'||c=='KeyL')&&!indentvisible)||(c=='KeyJ'&&indentvisible))
      {
      //let initscroll=listc.scrollTop;
      indentvisible=1-indentvisible;
      indentvisibletransform(list,false);
      mousetag='';
      if(lea)
         lea=document.getElementById(lea.id);
      if(pairl[0])
         pairl[0]=document.getElementById(pairl[0].id);
      if(pairl[1])
         pairl[1]=document.getElementById(pairl[1].id);
      if(lea&&lea.style.background)
        {scrollli(lea);
         scrollli(pairl[1]);}
      mouseoverupdate();
      }
   nextl=updateli(nextl);
   markedli=updateli(markedli);
   setmarkedli(markedli,false);
   expcolmarksupdate();
   }
   
else if(c=='Space'||c=='Enter'||c=='KeyC'||c=='Backspace'){
   if(markedli)
      doexpcol(c);
   }
else if(c=='ArrowUp'){
   if(markedli)
      {let c=pl(markedli)[0];
      if(c.id==minusonestring)
         c=markedli;
         {setmarkedli(c);
         scrollli(c);
         mousetag='';mousetagp=xs;
         mouseoverupdate();
         }
      }
   }
else if(c=='ArrowDown'){
   let c=(markedli&&markedli.id!=initlargeordinal)?nl(markedli):markedli;
      {  setmarkedli(c);
         scrollli(c);
         mousetag='';mousetagp=xs;
         mouseoverupdate();
      }
   }
else if(c=='KeyA'){
   window.prompt("Copy to clipboard: Ctrl+C",markedli.id);
   }
else if(c=='KeyS'){
   window.prompt("Copy to clipboard: Ctrl+C",convertc(markedli.id));
   }
mousetextupdate(mousex,mousey);	 	       	
}}
);

function initlargeordinalupdate()
{
resetlist();
}

window.onkeydown = function(e) { 
  return !((e.keyCode==32||e.keyCode==38||e.keyCode==40) && e.target == document.body);
};





`;

let scriptcode2=`





let uncountablemode=1;
let uncountablemodeinitnames=['Some large countable ordinal','Some large uncountable ordinal'];
let col='c',eo=0,efs=0,
exp=['Expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand','Recursivly expand'];
exp[-1]='Collapse',exp[-2]='view';
let count=1,vt=true,pairb=[],pairl=[],exb=[],di=5,fsl,fsn,fsp,lea,format=1,ps=[];
let countdifference,multicount;
let indentar=[indentmode0,indentmode1,indentmode2];
let mousex,mousey;
let gtkey=3,ltkey=3;
let processing=true;
let indentmode=0;
let indentvisible=1;
let keytcheck=true;
let mousetag,mousetagp=xs;
let fscurrent,fsopening,fsperiod0,fsperiod1,fsending,cofcurrent,cofclass,cardclass,fsarray;
let fsnumber=1,fsopeningarray,fsperiodarray,fsendingarray;
let cofclasslist=['','zero','successor','regular cardinal','singular cardinal'];
let cardclasslist=['finite cardinal','countable','uncountable','countable cardinal','uncountable cardinal'];
let ulnar=['UL1','UL'];
let markedli;
let prevsmallexp,nextsmallexpn;
let nextl,nextlb=false,mulcounter=1;
let nlevels=2;
let bolevels=2;
let leastr;
let vero=0;
let spn=true;
let subperiodpositionshift=0;
let leastuncountable,leastepsilon,leastepsilonbb;
let leastordinal='';
let sugar=[1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,35,36,37,38,39,1,0];
let sugardefault=[[...sugar],[...sugar]];
sugardefault[0][10]=0;
let sugarbuttoncolor=['#d0e0ff','#fff080','#d0ffd0','#d0ffff','','','','','#ffff00','#d0ffff','#d0ffd0','#d0ffd0','#ffe0e0','#fff0e0','#d0ffd0','#d0ffd0','#d0ffd0','#d0ffd0','#d0ffd0','#ffd0ff','#ffd0ff','#d0e0ff','#d0e0ff','#c0ffff','#b0ffb0','#ffe0e0','#a0f0c0','#fff000','#fafa00','#f0f040','#f0f040','#f0f040','#f0f040','#c0ffff','#c0ffff',35,36,37,38,39,'#ffd000','#f0f040'];
let sugarbuttonnumber=[1,2,1,1,0,0,0,0,1,1,1,1,1,1,1,1,2,1,1,2,2,1,1,1,1,1,1,1,1,1,1,2,1,1,1,0,0,0,0,0,1,1];
let multiplicationsign=['×','·'];
let propernames=['Small Cantor ordinal','Cantor ordinal','Large Cantor ordinal','Feferman–Schütte ordinal','Ackermann ordinal','Small Veblen ordinal','Large Veblen ordinal','Bachmann-Howard ordinal','Buchholz ordinal','Takeuti-Feferman-Buchholz ordinal','Extended Buchholz ordinal','Small Rathjen ordinal','Rathjen ordinal'];
let shortpropernames=['','','','','AO','SVO','LVO','BHO','BO','TFB','EBO','SRO','RO'];
let propernamestring;
initlargeordinalupdate();
seteo(eo);

dis.innerHTML='displayed<br/>fs elements: '+di;
indentar[indentvisible?indentmode:2].style.background='#d0ffd0';
`;

let w;
let repeatedrun=false;
let scriptelement;



let newscript=`
function compare(s1,s2)
{
return s1.localeCompare(s2);
}

function issuccessor(st)
{
return st&&st.at(-1)=='*';
}
function fs(st,n)
{
if(st==bo)
   return 'N'+'O'.repeat(n);
if(issuccessor(st))
   return st.slice(0,-1);
return st.slice(0,-1)+'*'.repeat(n);
}

function convert(st)
{
if(st==bo)
   return 'ω<sup>2</sup>';
let e=(st.match(/O/g)||[]).length;
let i=st.length-e-1;
if(e&&i)
   return 'ω'+(e>1?e:'')+' + '+i;
if(e)
   return 'ω'+(e>1?e:'');
return st.length-1;
}

let bo='Some large ordinal';
let initlargeordinal=bo;
let zerostring='N';
let minusonestring='-';
`;

</script></div></body></html>
